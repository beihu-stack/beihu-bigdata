<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.3.4 (460189)"/><meta name="author" content="Piece By Piece"/><meta name="created" content="2018-09-28 04:46:54 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-04-19 06:27:42 +0000"/><title>Cloudera6.0.0安装</title></head><body><div>doc:</div><div><a href="https://www.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cm_6_version_download.html">https://www.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cm_6_version_download.html</a></div><div><a href="https://www.cloudera.com/documentation/enterprise/6/latest/topics/installation.html">https://www.cloudera.com/documentation/enterprise/6/latest/topics/installation.html</a></div><div><br/></div><div>Nice doc</div><div><a href="https://blog.csdn.net/chenhai201/article/details/78856007">https://blog.csdn.net/chenhai201/article/details/78856007</a></div><div><br/></div><div>Centos7 install cm</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><a href="https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="box-sizing: border-box; font: 400 14px/1.45 Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; overflow: auto; background-color: rgb(247, 247, 247); border-radius: 3px; overflow-wrap: normal; white-space: pre; word-spacing: 0px; word-break: normal; tab-size: 2; hyphens: none; color: rgb(51, 51, 51); letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px; font-family: Monaco; font-size: 12px;">wget </span>https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/</a><a href="https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo" style="font-family: Times; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51);">cloudera-manager.repo</a></div></div><div><br/></div><div>Centos6 install cm</div><div>dfnmj</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-family: Monaco;">·11··········1. sudo wget </font><a href="https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/" style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/</a><a href="https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/cloudera-manager.repo" style="color: rgb(51, 51, 51); font-family: Times; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">cloudera-manager.repo</a><font style="font-family: Monaco;"> -P /etc/yum.repos.d/</font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo yum makecache</span></div><div><font style="font-family: Monaco;">2. master : <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span>yum install cloudera-manager-daemons cloudera-manager-agent cloudera-manager-server</font></div><div><div>2.1 slave : <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">yum install cloudera-manager-daemons cloudera-manager-agent</span></div></div><div><div><br/></div></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">2.2 配置sudo免密</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">root $ vim /etc/sudoers</span></div><div><font face="Monaco">root $ centos ……… </font>NOPASSWD: ALL</div><div>root $ wq!</div><div><br/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 安装网络下载速度太慢</span></div><div><font face="Monaco"># 尝试先下载到本地，配合yum在线安装 复制到 /var/cache/yum 内的缓存中</font></div><div>3. <a href="https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/RPMS/x86_64/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/RPMS/x86_64/</a><a href="https://archive.cloudera.com/cm6/6.0.0/redhat6/yum/RPMS/x86_64/cloudera-manager-daemons-6.0.0-530873.el6.x86_64.rpm" style="font-family: Times; font-size: medium; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51);">cloudera-manager-daemons-6.0.0-530873.el6.x86_64.rpm</a></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">4. 更换centos源 - ignore</span></div><div><font style="font-family: Monaco;">    sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</font></div><div><font face="Monaco">    sudo wget -O /etc/yum.repos.d/CentOS-Base.repo </font><a href="http://mirrors.aliyun.com/repo/Centos-6.repo" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">http://mirrors.aliyun.com/repo/Centos-6.repo</a></div><div>    sudo <span style="font-family: Monaco;">wget -O /etc/yum.repos.d/CentOS-Base.repo </span><a href="http://mirrors.aliyun.com/repo/Centos-7.repo" style="font-family: Monaco; color: rgb(51, 51, 51);">http://mirrors.aliyun.com/repo/Centos-7.repo</a></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo yum makecache</span></div><div><br/></div><div>4.1 安装JDK - 要求：JDK的版本必须相同</div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * The same version of the Oracle JDK must be installed on each cluster host.</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * The JDK must be installed at /usr/java/jdk-version</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo yum install oracle-j2sdk1.8</span></span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">    * you can download rpm package to install : use : sudo rpm -ivh <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">oracle-j2sdk1.8</span></span><font face="Monaco">…</font></div><div><div>    复制rpm包到各个节点，复制到 /usr/java下，安装</div></div><div>        sudo mkdir /usr/java</div><div>        sudo mv oracle-j2sdk1.8-1.8.0+update181-1.x86_64.rpm  /usr/java/</div><div>        cd /usr/java</div><div>        sudo rpm -ivh oracle-j2sdk1.8-1.8.0+update181-1.x86_64.rpm</div><div>        sudo rm -rf oracle-j2sdk1.8-1.8.0+update181-1.x86_64.rpm</div><div>    配置环境变量 /etc/profile or /etc/bashrc  or ~/.bashrc</div><div><br/></div><div>4.2.2 关闭防火墙和SELinux</div><div>    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">For iptables:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        sudo iptables-save &gt; ~/firewall.rules</span>    </div><div><div><br/></div></div><div>    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Disable the firewall:(<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">RHEL 7</span>)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo systemctl disable firewalld</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo systemctl stop firewalld</span></span></span></div><div><br/></div><div>    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">SELinux:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Check the SELinux state:</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            </span></span>getenforce</div><div><span>    <span>    设置：</span></span><br/></div><div><span>    <span>    <span>    </span></span></span>永久方法 – 需要重启服务器</div><div><span>    <span>    <span>    <span>    </span></span></span></span>修改/etc/selinux/config文件中设置SELINUX=disabled ，然后重启服务器。</div><div><br/></div><div>        </div><div>4.3 配置网络hostname - 需要符合 <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">FQDN (for example myhost-1.example.com)</span></div><div>    * <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">CDH requires IPv4. IPv6 is not supported</span></div><div>    * keep <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/etc/sysconfig/network</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">HOSTNAME=<span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">zk02.test.zjz</span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">sudo hostnamectl set-hostname apollo01.dev.zjz</span></span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);"><br/></span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">5 配置Hosts</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    192.168.20.68 zk01.test.zjz   <span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">apollo02.dev.zjz</span>               # zk,kafka, cloudera  op</span></div><div><span style="font-family: Monaco; font-size: 12px;"><span style="color: rgb(51, 51, 51);">    </span>192.168.20.65 zk02.test.zjz <span style="color: rgb(51, 51, 51);">  <span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">apollo01.dev.zjz</span>    </span></span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># zk,kafka, cloudera(master)     tm</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    192.168.20.174 zk04.test.zjz  <span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">apollo03.dev.zjz</span>               </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># cloudera            front</span></div><div><span style="font-family: Monaco;">    <font color="#ff2600">Attention</font>: For RHEL and CentOS, the /etc/sysconfig/network file on each host must contain the correct hostname.</span></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># python2.7安装(RHEL 7默认有安装)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">1. Enable the Software Collections Library:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo yum install centos-release-scl</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">2. Install the Software Collections utilities:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo yum install scl-utils</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">3. Install and enable Python 2.7:</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo yum install python27</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    source /opt/rh/python27/enable</span></div><div><font style="font-family: Monaco;">    测试：python2.7</font></div><div><font style="font-family: Monaco;">4. 永久起效：</font></div><div><font><span style="font-family: Monaco;">    cat /opt/rh/python27/enable —&gt; </span></font><span style="font-family: Monaco;">复制里面内容到</span><span style="font-family: Monaco;"> -&gt; </span><span style="font-family: Monaco;">vim /etc/profile</span></div><div><font><font face="Monaco">    source /etc/profile</font></font></div><div><div><br/></div></div><div>5.1 配置ssh免密登录</div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 在所有节点上一路回车到完成</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    ssh-keygen -t rsa</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 将公钥拷贝到<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">master</span>的authorized_keys上</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    cd .ssh</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span>cp id_rsa.pub authorized_keys_apollo04</div><div>    scp authorized_keys_apollo* centos@192.168.20.65:~/.ssh/</div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    // 待测试</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    ssh-copy-id -i ~/.ssh/id_rsa.pub centos@<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">zk02.test.zjz</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">ssh-copy-id -i ~/.ssh/id_rsa.pub centos@<span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">192.168.20.65</span></span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">在master节点上，将authorized_keys合并并分发到其他节点服务器：</span></span></div><div><font face="Monaco">    cat </font> authorized_keys_apollo* &gt;&gt; authorized_keys</div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    scp ~/.ssh/authorized_keys <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">centos@<span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">192.168.20.65</span></span>:~/.ssh/</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">6. <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">安装ntp时间同步软件</span></span></div><div># <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">所有节点时间一致非常重要，要不然启动Cloudera Manager服务后，后台会报错。</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">所有节点执行：</span></span></div><div><font face="Monaco">    sudo </font><span style="font-family: Monaco;">yum install ntp -y</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo ntpdate -u </span>ntp1<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">.aliyun.com # 利用阿里云同步</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">更改所有的节点</span></span></div><div><font style="font-family: Monaco;">    sudo vim /etc/ntp.conf </font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 注释掉所有server *.*.*的指向，新添加一条阿里提供的Unix类系统NTP服务</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    server time[1-7].aliyun.com prefer # (我用的1，1-7随便选一个自己喜欢的数字) </span></div><div><font style="font-family: Monaco;">    <font color="#ff2600">sudo systemctl enable ntpd     </font></font></div><div><font style="font-family: Monaco; color: rgb(255, 38, 0);">    sudo systemctl restart ntpd </font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    ntpq -p </span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo vim /etc/sysconfig/ntpd </span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        添加 </span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            SYNC_HWCLOCK=yes</span></div><div><font face="Monaco">同步硬件时钟：</font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">hwclock --systohc</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><br/></span></div><div><font face="Monaco"># 参考配置</font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">   </span><span style="font-family: Monaco; font-size: 12px;"><font color="#ff2600"> server ntp1.aliyun.com iburst</font></span></div><div><span style="font-family: Monaco; font-size: 12px;"><font color="#ff2600">    server ntp3.aliyun.com iburst</font></span></div><div><font color="#ff2600">    server ntp4.aliyun.com iburst</font></div><div><font color="#ff2600">    server ntp7.aliyun.com iburst</font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    server 0.centos.pool.ntp.org iburst</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    server 1.centos.pool.ntp.org iburst</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    server 2.centos.pool.ntp.org iburst</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    server 3.centos.pool.ntp.org iburst</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">4.2 必须配置Auto-TLS</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo JAVA_HOME=</span><span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">/usr/java/jdk1.8.0_141-cloudera</span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> /opt/cloudera/cm-agent/bin/certmanager setup --configure-services</span></div><div><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">    </span><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">sudo JAVA_HOME=</span><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">/usr/java/jdk1.8.0_181-cloudera</span><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;"> /opt/cloudera/cm-agent/bin/certmanager setup --configure-services</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * Log in: </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/var/log/cloudera-scm-agent/certmanager.log</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * CA in: </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/var/lib/cloudera-scm-server/certmanager/*</span></div><div><br/></div><div>4.3 配置本地的yum cloudera安装源（见下面）</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">7. 配置MySQL - 用户存储元数据</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># 7.1 使用OP-dev-mysql 版本需为支持版本 | </span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    select version(); execute this commend in mysql cli bash</span></span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">    op mysql version:5.7 is supported by cdh</span></div><div>    建议配置：<a href="https://www.cloudera.com/documentation/enterprise/6/6.0/topics/cm_ig_mysql.html" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://www.cloudera.com/documentation/enterprise/6/6.0/topics/cm_ig_mysql.html</a></div><div><br/></div><div># 7.2 <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Use UTF8 encoding for all custom databases. MySQL and MariaDB must use the </span><span style="font-family: Monaco; font-size: 12px;"><font color="#ff2600">MySQL utf8 encoding</font></span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">, not utf8mb4</span></div><div><br/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 7.3 For MySQL 5.6 and 5.7, you must install the </span><span style="font-family: Monaco; font-size: 12px;"><font style="color: rgb(255, 147, 0);">MySQL-shared-compat</font></span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);" /><span style="font-family: Monaco; font-size: 12px;"><font color="#ff2600">or</font></span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);" /><span style="font-family: Monaco; font-size: 12px;"><font style="color: rgb(255, 147, 0);">MySQL-shared package</font></span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">. This is required for the Cloudera Manager Agent package installation.</span></div><div><div><br/></div></div><div><a href="https://dev.mysql.com/doc/refman/5.6/en/linux-installation-yum-repo.html" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://dev.mysql.com/doc/refman/5.6/en/linux-installation-yum-repo.html</a></div><div><br/></div><div>国内mysql镜像地址：<a href="https://mirrors.ustc.edu.cn/mysql-repo/yum/mysql-5.7-community/el/6/x86_64/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://mirrors.ustc.edu.cn/mysql-repo/yum/mysql-5.7-community/el/6/x86_64/</a></div><div><br/></div><div># 7.4 安装mysql数据库驱动</div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># Cloudera recommends using only version 5.1 of the JDBC driver</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.47.tar.gz</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    tar zxvf mysql-connector-java-5.1.47.tar.gz</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo mkdir -p /usr/share/java/</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    cd mysql-connector-java-5.1.47</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo cp mysql-connector-java-5.1.47.jar /usr/share/java/mysql-connector-java.jar</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 7.5 设置数据库 创建必须的表 供存储元数据</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Cloudera Manager Server</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database scm DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Activity Monitor</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database amon DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Reports Manager</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database rman DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Hue</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database hue DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Hive Metastore Server</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database metastore DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Sentry Server</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database sentry DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Cloudera Navigator Audit Server</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database nav DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Cloudera Navigator Metadata Server</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database navms DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">-- Oozie</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">create database oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">show grants;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">grant all on *.* to 'admin'@'192.168.%' identified by 'PS#2017#admin' with grant option;</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 7.5 设置数据库</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 官网提供了数据库配置脚本（<a href="https://www.cloudera.com/documentation/enterprise/6/6.0/topics/prepare_cm_database.html" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://www.cloudera.com/documentation/enterprise/6/6.0/topics/prepare_cm_database.html</a>）</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 语法 <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo /opt/cloudera/cm/schema/scm_prepare_database.sh &lt;databaseType&gt; &lt;databaseName&gt; &lt;databaseUser&gt;</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql -h 192.168.20.60 --scm-host zk02.test.zjz scm admin</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql -h 192.168.20.60 --scm-host <span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">apollo01.dev.zjz</span> scm admin</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * 输入数据库密码</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">All done, your SCM database is configured correctly!</span></span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 7.6 配置 agent: 7182 为agent与server通信的端口</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">修改 /etc/cloudera-scm-agent/config.ini 中的server_host为master的IP</span></div><div><br/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 8 启动CM</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo service cloudera-scm-server start</span></div><div><span style="font-family: Monaco; font-size: 12px;">    <span style="font-family: Monaco; font-size: 12px;"><font style="color: rgb(255, 38, 0);">sudo systemctl start cloudera-scm-server</font></span></span></div><div><span style="font-family: Monaco; font-size: 12px;"><span style="font-family: Monaco; font-size: 12px;"><font style="color: rgb(255, 38, 0);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(255, 38, 0);">sudo systemctl restart cloudera-scm-server</span></font></span></span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Starting cloudera-scm-server:                              [  OK  ]</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">To observe the startup process</span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * 启动成功信息：<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">INFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.</span></span></span></span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">    </span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># 9 浏览器打开</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    * In a web browser, go to http://&lt;server_host&gt;:7180</span></div><div><div>    * 默认admin admin</div></div><div><br/></div><div># 集群安装</div><div>    master 安装： daemons server agent</div><div>        启动server自动启动agent</div><div>    slave 安装：  daemons agent</div><div>        启动agent</div><div>            sudo service <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">cloudera-scm-agent</span> start</div><div>            <span style="font-family: Monaco; font-size: 12px;"><font style="color: rgb(255, 38, 0);">sudo systemctl start <span style="font-family: Monaco; font-size: 12px;">cloudera-scm-agent</span></font></span></div><div><span style="color: rgb(255, 38, 0); font-family: Monaco; font-size: 12px;">            sudo systemctl restart </span><span style="color: rgb(255, 38, 0); font-family: Monaco; font-size: 12px;">cloudera-scm-agent</span></div><div>            <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo tail -f /var/log/cloudera-scm-agent/cloudera-scm-agent.log </span></div><div><div><br/></div></div><div>    </div></div><div><br/></div><div>版本区别：</div><div><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/B1E06C89-FF01-4660-B0E5-43FD88414CF2.png" height="1294" width="2458"/><br/></div><div><br/></div><div>问题：</div><div>    1 HTTS证书不安全：TODO</div><div><a href="https://www.cloudera.com/documentation/enterprise/6/6.0/topics/auto_tls.html#auto_tls">https://www.cloudera.com/documentation/enterprise/6/6.0/topics/auto_tls.html#auto_tls</a></div><div><br/></div><div><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/86EF6375-BDA8-4BF6-8C82-96BE3E2B9CE9.png" height="212" width="746"/><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>** Ignore -&gt; 直接忽略浏览器报警</div><div>* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">CA in: </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/var/lib/cloudera-scm-server/certmanager/*</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">For Cloudera Manager Server clusters, each host should have its own keystore, while several hosts can share the same truststore.</span></span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">On Each Cluster Host</span></span></span></div><div>* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Configure your environment to set JAVA_HOME : already configed</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo mkdir -p /opt/cloudera/security/pki</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Use the keytool utility to generate a Java keystore and certificate signing request (CSR)</span></span></div><div><font face="Monaco">    1. sudo </font><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">$JAVA_HOME/bin/keytool -genkeypair -alias $(hostname -f) -keyalg RSA -keystore /opt/cloudera/security/pki/$(hostname -f).jks -keysize 2048 -dname "CN=$(hostname -f),OU=zjz,O=Cloudera,L=songjiang,ST=<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">shanghai</span>,C=ZH" -ext san=dns:$(hostname -f)</span></div><div><span style="font-family: Monaco; font-size: 12px;"><span style="font-family: Monaco; font-size: 12px;"><span style="font-family: Monaco; font-size: 12px;">    2. <span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;">When prompted, use </span><span style="font-family: Monaco; font-size: 12px;"><font color="#ff2600">the same password</font></span><span style="color: rgb(51, 51, 51); font-family: Monaco; font-size: 12px;"> for the keystore password and key password. Cloudera Manager does not support using different passwords</span></span></span></span></div><div><span style="font-family: Monaco;">       for the key and keystore.</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    3. Enter keystore password</span></span></span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        Enter keystore password:  <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">zjZ_3Qf   123456</span></span></div><div><span style="font-family: Monaco;">        Re-enter new password: </span><span style="font-family: Monaco;">zjZ_3Qf</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">        Enter key password for &lt;zk02.test.zjz&gt;</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">            (RETURN if same as keystore password): 直接 enter</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    4. sudo <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">$JAVA_HOME/bin/keytool -certreq -alias $(hostname -f) -keystore /opt/cloudera/security/pki/$(hostname -f).jks -file /opt/cloudera/security/pki/$(hostname -f).csr -ext san=dns:$(hostname -f)</span></span></div></div><div><br/></div><div>    2 虚拟内存设置</div><div>    Cloudera 建议将 /proc/sys/vm/swappiness 设置为 0</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sysctl -w vm.swappiness=0</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"> or</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">echo vm.swappiness = 0 &gt;&gt; /etc/sysctl.conf</span></div></div><div>    </div><div>    3 大内存页设置</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div># <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">大内存页禁用 需root</span></div><div><font style="font-family: Monaco;">echo never&gt;/sys/kernel/mm/transparent_hugepage/defrag</font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">echo never&gt;/sys/kernel/mm/transparent_hugepage/enabled</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">#<span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">以禁用此设置，然后将同一命令添加到 /etc/rc.local 等初始化脚本中，以便在系统重启时予以设置。</span></span></div></div><div><br/></div><ol start="4"><li><div>安装软件仓库</div></li></ol><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># TODO</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 分别将软件包放入 cm6 和 cdh6 中</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 将Cloudera Manager安装需要的5个rpm包下载到本地，放在同一目录，执行createrepo命令生成rpm元数据。</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    sudo yum install createrepo</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">createrepo .</span></span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># 临时内网解决方案</span></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    nohup python -m SimpleHTTPServer 8900 &amp;</span></div><div><div><br/></div></div><div><font face="Monaco"># 访问：</font></div><div><font style="font-family: Monaco;">    <a href="http://192.168.20.65:8900/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">http://192.168.20.65:8900/</a></font></div><div><font style="font-family: Monaco;">    <a href="http://192.168.20.65:8900/cm6/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">http://192.168.20.65:8900/cm6/</a></font></div><div><div><br/></div></div><div><font face="Monaco"># 配置repo</font></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    vim cm.repo</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    [cmrepo]</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    name=cm_repo</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    baseurl=<a href="http://192.168.20.65:8900/cm6.1.1-el7/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">http://192.168.20.65:8900/cm6.1.1-el7</a></span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    enable=1</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    gpgcheck=0</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    yum repolist</span></div></div><div><br/></div><ol start="5"><li><div>校验软件仓库</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><a href="https://archive.cloudera.com/cm6/6.0.0/allkeys.asc" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://archive.cloudera.com/cm6/6.0.0/allkeys.asc</a></div></div><div><br/></div><div><br/></div><div>CDH isntall on cm 离线方式 ，先下载<span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">Parcels文件：注意版本</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"># CDH 6.0.0</span></div><div><a href="https://archive.cloudera.com/cdh6/6.0.0/parcels/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://archive.cloudera.com/cdh6/6.0.0/parcels/</a></div><div><br/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Parcels - </span><span style="font-family: Monaco;">https://archive.cloudera.com/cdh6/6.0.0/parcels/</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">RHEL 7 - </span><span style="font-family: Monaco;">https://archive.cloudera.com/cdh6/6.0.0/redhat7/yum/</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">RHEL 6 - </span><span style="font-family: Monaco;">https://archive.cloudera.com/cdh6/6.0.0/redhat6/yum/</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">Ubuntu Xenial (16.04) - </span><span style="font-family: Monaco;">https://archive.cloudera.com/cdh6/6.0.0/ubuntu1604/apt/</span></div></div><div><br/></div><div>CDH 6 Maven Repository</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Doc: <a href="https://www.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_maven_repo.html" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://www.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_maven_repo.html</a></font></div><div><div><br/></div></div><div><font face="Monaco">Maven host: https://repository.cloudera.com/artifactory/cloudera-repos/</font></div></div><div><br/></div><div><br/></div><div>CM Parcel设置：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(120, 120, 120); font-family: Roboto, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: bold; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Parcel 目录：  <span style="font-weight: bold; font-family: Roboto; color: rgb(120, 120, 120);">/opt/cloudera/parcels</span></span></div><div><div style="box-sizing: border-box; color: rgb(120, 120, 120); font-weight: bold;"><span style="box-sizing: border-box; color: rgb(120, 120, 120); font-weight: bold; font-family: Roboto;">本地 Parcel 存储库路径  <span style="font-weight: bold; font-family: Roboto; font-size: 12px; color: rgb(120, 120, 120);">/opt/cloudera/parcel-repo</span></span></div></div><div><br style="font-weight: bold; font-family: Roboto; color: rgb(120, 120, 120);"/></div><div><a href="http://192.168.20.65:8900/cdh5/" style="font-weight: bold; font-family: Roboto; color: rgb(120, 120, 120);">http://192.168.20.65:8900/cdh5/</a></div><div><a href="https://archive.cloudera.com/cdh6/6.0.0/parcels/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://archive.cloudera.com/cdh6/6.0.0/parcels/</a></div><div><a href="https://archive.cloudera.com/accumulo-c5/parcels/latest/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://archive.cloudera.com/accumulo-c5/parcels/latest/</a></div><div><a href="http://192.168.20.65:8900/kafka3/" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">http://192.168.20.65:8900/kafka3/</a></div></div><div><br/></div><div><br/></div><div><br/></div><div>重新安装最新版本：</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><div><span style="font-family: Menlo; font-size: 13px; color: rgb(51, 51, 51);">sudo service cloudera-scm-server stop</span></div><div><span style="font-family: Menlo; font-size: 13px; color: rgb(51, 51, 51);">sudo service cloudera-scm-agent stop</span></div><div><span style="font-family: Menlo; font-size: 13px; color: rgb(51, 51, 51);">sudo yum remove cloudera-manager-daemons cloudera-manager-agent cloudera-manager-server</span></div><div><div><br/></div></div><div><span style="font-family: Menlo; font-size: 13px; color: rgb(51, 51, 51);">sudo service cloudera-scm-agent hard_stop</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; border-radius: 0px; white-space: pre; border: none; vertical-align: middle; color: rgb(51, 51, 51);">sudo service cloudera-scm-agent next_stop_hard</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; border-radius: 0px; white-space: pre; border: none; vertical-align: middle; color: rgb(51, 51, 51);">sudo service cloudera-scm-agent stop</span></div></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo yum remove 'cloudera-manager-*'</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo yum clean all </span></div><div><div><br/></div></div><div>sudo umount cm_processes</div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">rpm -qa | grep cloudera</span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo rm -rf /var/run/oozie* /var/run/sqoop* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/var/lib/hue </span>/var/run/hadoop* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/var/lib/navigator</span> /var/run/flume-ng* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/var/lib/solr</span> /var/run/cloudera* /var/run/zookeeper* /var/run/hbase* /var/run/impala* /var/run/hive* /var/run/hdfs-sockets <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/etc/cloudera* <span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">/usr/share/cmf /var/lib/cloudera* /var/cache/yum/x86_64/6/cloudera* /var/log/cloudera* /var/run/cloudera*</span></span></span></div><div><div><br/></div></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">rm -rf /data/dfs</span></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><a href="https://blog.csdn.net/mlljava1111/article/details/50036965" style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">https://blog.csdn.net/mlljava1111/article/details/50036965</a></div><div><br/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo rm -rf /var/lib/flume-ng /var/lib/hadoop* /var/lib/hue /var/lib/oozie /var/lib/solr /var/lib/sqoop*</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo rm -rf /dfs /mapred /yarn</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span>rm -rf /var/run/hadoop* /var/run/flume-ng* /var/run/cloudera* /var/run/oozie* /var/run/sqoop* /var/run/zookeeper* /var/run/hbase* /var/run/impala* /var/run/hive* /var/run/hdfs-sockets</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">rm -rf /usr/lib/hadoop /usr/lib/hadoop* /usr/lib/hive /usr/lib/hbase /usr/lib/oozie /usr/lib/sqoop* /usr/lib/zookeeper /usr/lib/bigtop* /usr/lib/flume-ng /usr/lib/hcatalog</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span>rm -rf /usr/bin/hadoop* /usr/bin/zookeeper* /usr/bin/hbase* /usr/bin/hive* /usr/bin/hdfs /usr/bin/mapred /usr/bin/yarn /usr/bin/sqoop* /usr/bin/oozie</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span>rm -rf /etc/hadoop* /etc/zookeeper* /etc/hive* /etc/hue /etc/impala /etc/sqoop* /etc/oozie /etc/hbase* /etc/hcatalog</span></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><br style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);"><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">sudo </span>rm -rf /data/dfs </span>/etc/alternatives/flume* /etc/alternatives/hadoop* /etc/alternatives/hbase* /etc/alternatives/hive* /etc/alternatives/hue* /etc/alternatives/impala* /etc/alternatives/llama* /etc/alternatives/oozie* /etc/alternatives/pig* /etc/alternatives/solr* /etc/alternatives/spark* /etc/alternatives/sqoop* /etc/alternatives/zookeeper* /etc/alternatives/kafka* /var/lib/alternatives/{cdh.app} /var/lib/alternatives/flume* /var/lib/alternatives/hadoop* /var/lib/alternatives/hbase* /var/lib/alternatives/hive* /var/lib/alternatives/hue* /var/lib/alternatives/impala* /var/lib/alternatives/llama* /var/lib/alternatives/oozie* /var/lib/alternatives/pig* /var/lib/alternatives/solr* /var/lib/alternatives/spark* /var/lib/alternatives/sqoop* /var/lib/alternatives/zookeeper* /var/lib/alternatives/kafka* /var/lib/alternatives/hdfs* /var/lib/alternatives/kudu*  /opt/cloudera/* /var/log/hadoop-* /var/log/hue* /var/log/oozie* /var/log/sqoop* /var/log/pig* /var/log/hive* /var/log/hbase* /var/log/zookeeper* /var/log/mahout* /var/log/impala* /var/log/hdfs* /var/lib/hdfs* /var/lib/alternatives/hdfs* /var/run/hdfs* /etc/hdfs* /etc/alternatives/hdfs* /usr/bin/hdfs* /var/run/hdfs* /var/log/yarn* /var/log/whirr* /var/log/mapred* /var/lib/mapred* /var/lib/alternatives/mapred* /var/run/mapred* /etc/mapred* /etc/alternatives/mapred* /usr/bin/mapred* /var/run/mapred* /tmp/.scm_prepare_node.lock /opt/cloudera* /etc/kafka*  /etc/alternatives/kafka*  /usr/bin/kafka* /var/log/kafka* /var/local/kafka* /var/lib/kafka* /var/lib/alternatives/kafka*</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">sudo rm -rf /var/lib/</span>hbase /var/lib/hive /var/lib/impala /var/lib/kudu /var/lib/sentry /var/lib/spark zookeeper</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-family: Monaco;">sudo find / -name cloudera*</font></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>清理组件用户</div><div>sudo userdel hue;</div><div>sudo userdel impala;</div><div>sudo userdel spark;</div><div>sudo userdel sentry;</div><div>sudo userdel sqoop2;</div><div>sudo userdel hbase;</div><div>sudo userdel oozie;</div><div>sudo userdel yarn;</div><div>sudo userdel mapred;</div><div>sudo userdel zookeeper;</div><div>sudo userdel httpfs;</div><div>sudo userdel solr;</div><div>sudo userdel kms;</div><div>sudo userdel hive;</div><div>sudo userdel flume;</div><div>sudo userdel hdfs;</div><div>sudo userdel sqoop;</div><div>sudo userdel llama;</div><div>sudo userdel cloudera-scm;</div><div>sudo userdel postgres;</div><div>sudo userdel kudu;</div><div>sudo userdel kafka;</div></div><div><br/></div><h2 style="text-indent: -28.8pt; word-break: normal;"><span style="text-indent: -28.8pt; word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;">3.3</span><span style="text-indent: -28.8pt; word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; line-height: normal;"> </span><span style="text-indent: -28.8pt; word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;">配置</span><span style="text-indent: -28.8pt; word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;">SSH</span><span style="text-indent: -28.8pt; word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;">无密码</span><span style="text-indent: -28.8pt; word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;">登录</span></h2><ol><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">使用</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">hadoop</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">用户登录在三个节点中使用如下命令生成私钥和公钥；</span></div></li><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">进入</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">/home/hadoop/.ssh</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">目录在三个节点中分别把公钥命名为</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">authorized_keys_hadoop1</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">、</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">authorized_keys_hadoop2</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">和</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">authorized_keys_hadoop3</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">，使用命令如下：</span></div></li><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">把两个从节点</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">(hadoop2</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">、</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">hadoop3)</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">的公钥使用</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">scp</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">命令传送到</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">hadoop1</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">节点的</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">/home/hadoop/.ssh</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">文件夹中；</span></div></li><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">把三个节点的公钥信息保存到</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">authorized_key</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">文件中</span></div></li><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">把该文件分发到其他两个从节点上</span></div></li><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">在三台机器中使用如下设置</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">authorized_keys</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">读写权限</span></div></li><li><div><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">测试</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">ssh</span><span style="font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑;">免密码登录是否生效</span></div></li></ol><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$ssh-keygen -t rsa</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122174398281.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/38968272-5D7B-47FF-82A7-C2552742BBA8.jpg" height="294" width="676"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$cd /home/hadoop/.ssh</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$cp id_rsa.pub authorized_keys_hadoop1</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122188765808.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/2AB2F0E8-827F-49B8-8E45-CD2E7A68F416.jpg" height="65" width="665"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$</span><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">scp authorized_keys_hadoop2 hadoop@hadoop1:/home/hadoop/.ssh</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$scp authorized_keys_hadoop3 hadoop@hadoop1:/home/hadoop/.ssh</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122209863963.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/0561FA27-9671-4AB3-B7EA-1F9F061CDBA9.jpg" height="70" width="665"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122219556034.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/385D2158-4440-4E25-89C1-4E7DD52D36EB.jpg" height="53" width="665"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;-en-paragraph:true;">使用</span><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$cat authorized_keys_hadoop1 &gt;&gt; authorized_keys</span><span style="word-break: normal; font-size: 15px; font-family: 微软雅黑; line-height: normal;-en-paragraph:true;" /><span style="word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;-en-paragraph:true;">命令</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122234552776.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/CEF30277-BB3A-49E0-B5CF-6A179A37FC19.jpg" height="284" width="665"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;-en-paragraph:true;">使用</span><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$scp authorized_keys hadoop@hadoop2:/home/hadoop/.ssh</span><span style="word-break: normal; font-size: 15px; color: rgb(0, 0, 0); font-family: 微软雅黑; line-height: normal;-en-paragraph:true;">把密码文件分发出去</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122254392905.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/6F2549C3-4036-4B2D-8ED7-607CA41A1A03.jpg" height="216" width="665"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122314234642.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/85BC2E7A-55B0-4DAC-A974-CC0090A48284.jpg" height="59" width="665"/><br/></a></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><span style="word-break: normal; font-size: 15px; color: rgb(4, 150, 21); font-family: 微软雅黑; font-style: italic; line-height: normal;-en-paragraph:true;">$chmod 400 authorized_keys</span></div><div style="word-break: normal; margin-top: 1em; margin-bottom: 1em;"><a href="http://images0.cnblogs.com/blog/107289/201508/041122327834426.jpg" style="line-height: normal;"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/D21BF47F-406C-4A23-ABBA-35ABFF22027A.jpg" height="49" width="665"/><br/></a></div><div><a href="http://images0.cnblogs.com/blog/107289/201508/041122373452867.jpg"><img src="Cloudera6.0.0%E5%AE%89%E8%A3%85.resources/A604A035-5DDE-4748-A08C-AD86BA3491ED.jpg" height="174" width="665"/><br/></a></div><div><br/></div><div><a href="http://images0.cnblogs.com/blog/107289/201508/041122373452867.jpg">D</a>ocker 安装 quickstart</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">下载压缩包，解压</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">导入</span></div><div>docker import cloudera-quickstart-vm-5.13.0-0-beta-docker.tar</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">docker images</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">官方：</span></div><div>docker run --hostname=quickstart.cloudera --privileged=true -t -i -d -p 8888 0cba821541c7 /usr/bin/docker-quickstart</div><div>docker ps</div><div>docker attach [CONTAINER HASH]</div><div>docker port [CONTAINER HASH] [GUEST PORT]</div><div><br/></div><div>Cloudera Manager is not started by default. To see options for starting Cloudera Manager, run the following command:</div><div>/home/cloudera/cloudera-manager</div><div><br/></div><div><br/></div><div>个人：</div><div>docker run --name cdh --hostname=quickstart.cloudera --privileged=true -t -i -d -v /Users/zhengjinzhou/project/sub:/sub -p 8020:8020 -p 8022:8022 -p 7180:7180 -p 21050:21050 -p 50070:50070 -p 50075:50075 -p 50010:50010 -p 50020:50020 -p 8890:8890 -p 60010:60010 -p 10002:10002 -p 25010:25010 -p 25020:25020 -p 18088:18088 -p 8088:8088 -p 19888:19888 -p 7187:7187 -p 11000:11000 0cba821541c7 /bin/bash -c '/usr/bin/docker-quickstart &amp;&amp; /home/cloudera/cloudera-manager --express &amp;&amp; service ntpd start'</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>