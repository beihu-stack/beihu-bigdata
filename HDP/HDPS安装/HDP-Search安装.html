<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.1 (457749)"/><meta name="author" content="Piece By Piece"/><meta name="created" content="2019-06-05 03:38:30 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-06-05 06:29:27 +0000"/><title>HDP-Search安装</title></head><body><div><font style="font-size: 18px;">官方repo</font></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 266px;"/><col style="width: 266px;"/><col style="width: 274px;"/></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; text-align: left; width: 266px; padding: 8px; border: 1px solid;"><div style="font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">OS</span></div></td><td style="box-sizing: border-box; text-align: left; width: 266px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Format</span></div></td><td style="box-sizing: border-box; text-align: left; width: 274px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">URL</span></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; width: 266px; padding: 8px; border: 1px solid;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">RedHat or CentOS 7
</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 266px; padding: 8px; border: 1px solid;"><div style="font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Repo File </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 274px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7/hdp-solr.repo" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7/hdp-solr.repo</a></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; width: 266px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">  </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 266px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Tarball </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 274px; padding: 8px; border: 1px solid;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7/HDP-SOLR-4.0.0-400-centos7.tar.gz" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7/HDP-SOLR-4.0.0-400-centos7.tar.gz</a></div><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">(</span><a href="http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7/HDP-SOLR-4.0.0-400-centos7.tar.gz.md5" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">md5</a><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">, </span><a href="http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7/HDP-SOLR-4.0.0-400-centos7.tar.gz.asc" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">asc</a><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">)
</span></div></td></tr></tbody></table><div><br/></div><div><font style="font-size: 18px;">自作本地</font></div><ol><li><div>下载tar包</div></li><li><div>解压到http服务器</div></li><ol><li><div>tar -zxvf HDP-SOLR-4.0.0-400-centos7.tar.gz  </div></li></ol><li><div>修改repo的地址为本地</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>[HDP-SOLR-4.0.0-400]                                                                                                                                                                                              </div><div>name=Hortonworks Data Platform Version - HDP-SOLR-4.0.0-400                                                                                                                                                      </div><div># baseurl=http://public-repo-1.hortonworks.com/HDP-SOLR-4.0.0-400/repos/centos7</div><div>baseurl=http://192.168.20.65:8900/hdps/centos7                                                                                                                                  </div><div>gpgcheck=0                                                                                                                                                                                                        </div><div>enabled=1                                                                                                                                                                                                        </div><div>priority=1 </div></div><ol start="4"><li><div>yum repolist</div></li><li><div>安装 mpack  https://docs.hortonworks.com/HDPDocuments/HDPS/HDPS-4.0.0/bk_solr-search-installation/content/hdp-search40-install-mpack.html</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd /tmp</div><div>wget http://public-repo-1.hortonworks.com/HDP-SOLR/hdp-solr-ambari-mp/solr-service-mpack-4.0.0.tar.gz</div><div><br/></div><div>ambari-server install-mpack --mpack=/tmp/solr-service-mpack-4.0.0.tar.gz</div><div><br/></div><div>ambari-server restart</div></div><ol start="8"><li><div>Ambari面板安装：如果手动安装可参考：<a href="https://doc.lucidworks.com/lucidworks-hdpsearch/4.0.0/Guide-Install-Manual.html#hdfs-specific-changes">https://doc.lucidworks.com/lucidworks-hdpsearch/4.0.0/Guide-Install-Manual.html#hdfs-specific-changes</a></div></li><li><div>配置solr： <a href="https://doc.lucidworks.com/lucidworks-hdpsearch/4.0.0/Guide-Install-Ambari.html#guide-install-ambari">https://doc.lucidworks.com/lucidworks-hdpsearch/4.0.0/Guide-Install-Ambari.html#guide-install-ambari</a></div></li><li><div>Connector： <a href="https://doc.lucidworks.com/lucidworks-hdpsearch/4.0.0/Guide-Jobs.html#hive-serde">https://doc.lucidworks.com/lucidworks-hdpsearch/4.0.0/Guide-Jobs.html#hive-serde</a></div></li></ol><div><br/></div><div><font style="font-size: 18px;">Connector</font></div><div><span>需要手动配置</span></div><ul><li><div><span/>参考 9.配置solr</div></li></ul><div><br/></div><div>重点：</div><ol><li><div>HDFS配置</div></li></ol><div><span>    <span>    <span>   </span></span></span>Delete write.lock files on HDFS    true</div><div><span>    <span>    <span>   推荐开启该配置：有利于Ambari启动Solr时自动删除write.lock文件，避免特殊意外宕机场景下，solr无法启动</span></span></span><br/></div><div><span><span><span><br/></span></span></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><span><br/></span></div><div><br/></div><div><br/></div></body></html>