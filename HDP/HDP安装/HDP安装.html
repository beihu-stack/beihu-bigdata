<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.1 (457749)"/><meta name="author" content="Piece By Piece"/><meta name="created" content="2019-03-18 08:00:54 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-07-04 04:08:05 +0000"/><title>HDP安装</title></head><body><div>Centos7</div><div><br/></div><div>内存需求：</div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/ED723A40-6057-4B78-AE15-B0881D05EBB2.png" height="490" width="850"/><br/></div><div><br/></div><div><br/></div><div>UMASK：</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>Ambari, HDP, and HDF support umask values of 022 (0022 is functionally equivalent), 027 (0027 is functionally equivalent). These values must be set on all hosts.</div><div>UMASK Examples:</div><div>Setting the umask for your current login session:</div><div>umask 0022</div><div>Checking your current umask:</div><div>umask</div><div>Permanently changing the umask for all interactive users:</div><div>echo umask 0022 &gt;&gt; /etc/profile</div></div><div><br/></div><div>数据库：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>Using MySQL requires the default, InnoDB engine for MySQL 5.6</div><div>https://docs.hortonworks.com/HDPDocuments/Ambari-2.7.3.0/administering-ambari/content/amb_using_ambari_with_mysql_or_mariadb.html</div><div><br/></div><div><font style="color: rgb(255, 38, 0);">ambari-server setup --jdbc-db=mysql --jdbc-driver=/usr/share/java/mysql-connector-java.jar</font></div><div>Make sure the .jar file has the appropriate permissions - 644</div><div><br/></div><div>Create a user for Ambari and grant it permissions：</div><div># mysql -u root -p </div><div>CREATE USER 'ambari'@'%' IDENTIFIED BY '12345_Zjz'; </div><div>GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%'; </div><div>CREATE USER 'ambari'@'localhost' IDENTIFIED BY '12345_Zjz'; </div><div>GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'localhost'; </div><div>CREATE USER 'ambari'@'192.168.20.65' IDENTIFIED BY '12345_Zjz'; </div><div>GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'192.168.20.65'; </div><div>FLUSH PRIVILEGES;</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">执行SQL脚本：</span></div><div>/var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql</div><div>注意：sql里面有一些坑</div><div><br/></div><div>sudo docker exec -it MySQL /bin/bash</div><div>mysql -u ambari -p12345_Zjz </div><div>CREATE DATABASE ambari DEFAULT CHARACTER SET utf8; </div><div>USE ambari; </div><div>SOURCE /opt/sql/Ambari-DDL-MySQL-CREATE.sql;</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">最后：</span></div><div>When <font color="#0433ff">setting up</font> the Ambari Server, select Advanced Database Configuration &gt; Option [3] MySQL/MariaDB and enter the credentials you defined in Step 2. for user name, password and database name.</div></div><div><br/></div><div>数据库配置 for Ranger</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>The MySQL database administrator should be used to create the Ranger databases.</div><div><br/></div><div>CREATE USER 'rangerdba'@'localhost' IDENTIFIED BY 'rangerdba';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'localhost';</div><div>CREATE USER 'rangerdba'@'%' IDENTIFIED BY 'rangerdba';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'%';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'localhost' WITH GRANT OPTION;</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'%' WITH GRANT OPTION;</div><div>FLUSH PRIVILEGES;</div><div><br/></div><div>You <font style="color: rgb(255, 38, 0);">must change the variable log_bin_trust_function_creators to 1 during Ranger installation</font>.</div><div>From RDS Dashboard&gt;Parameter group (on the left side of the page):</div><div><div>1. Set the MySQL Server variable log_bin_trust_function_creators to 1.</div><div>    mysql&gt; show variables like 'log_bin_trust_function_creators';</div><div>    mysql&gt; set global log_bin_trust_function_creators=1;</div><div>2. (Optional) After Ranger installation is complete, reset log_bin_trust_function_creators to its original setting. The variable is only required to be set to 1 during Ranger installation.</div></div></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/9C68FEDE-D953-445C-B358-D06FBC10D3D1.png" height="994" width="2614"/><br/></div><div><br/></div><div><br/></div><div>数据库配置 for HDF Services</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>When installing Schema Registry, SAM, Druid, and Superset, you require a relational data store to store metadata.</div><div><br/></div><div>mysql -u root -p</div><div><br/></div><div>create database registry DEFAULT CHARACTER SET utf8;</div><div>create database streamline DEFAULT CHARACTER SET utf8;</div><div>CREATE USER 'registry'@'%' IDENTIFIED BY '123456';</div><div>CREATE USER 'streamline'@'%' IDENTIFIED BY '123456';</div><div>GRANT ALL PRIVILEGES ON registry.* TO 'registry'@'%' WITH GRANT OPTION ;</div><div>GRANT ALL PRIVILEGES ON streamline.* TO 'streamline'@'%' WITH GRANT OPTION ;</div><div>commit;</div><div><br/></div><div><br/></div><div>CREATE DATABASE druid DEFAULT CHARACTER SET utf8;</div><div>CREATE DATABASE superset DEFAULT CHARACTER SET utf8;</div><div><br/></div><div>CREATE USER 'druid'@'%' IDENTIFIED BY ‘123456';</div><div>CREATE USER 'superset'@'%' IDENTIFIED BY '123456’;</div><div><br/></div><div>GRANT ALL PRIVILEGES ON *.* TO 'druid'@'%' WITH GRANT OPTION;</div><div>GRANT ALL PRIVILEGES ON *.* TO 'superset'@'%' WITH GRANT OPTION;</div><div>commit;</div></div><div><br/></div><div>其他数据库配置：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div># 元数据存储：dev直接给root 123456</div><div>-- Hive </div><div>create database hive character set utf8;</div><div>-- Hue</div><div>-- create database hue DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</div><div>-- Sentry Server</div><div>-- create database sentry DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</div><div>-- Oozie</div><div>create database oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</div></div><div><br/></div><div>自定义离线本地安装库：</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">下载地址：</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 200px;"/><col style="width: 200px;"/><col style="width: 806px;"/></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; width: 200px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">OS</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 200px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">Format</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 806px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">URL</span></div></td></tr><tr style="box-sizing: border-box;"><td rowspan="3" style="box-sizing: border-box; vertical-align: top; width: 200px; padding: 8px; border: 1px solid;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">RedHat 7
</span></div><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">CentOS 7
</span></div><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">Oracle Linux 7
</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 200px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Base URL </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 806px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 200px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Repo File </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 806px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari.repo" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari.repo</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 200px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Tarball </span><a href="http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari-2.7.3.0-centos7.tar.gz.md5" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">md5</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> |</span><a href="http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari-2.7.3.0-centos7.tar.gz.asc" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">asc</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"
/></div></td><td style="box-sizing: border-box; vertical-align: top; width: 806px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari-2.7.3.0-centos7.tar.gz" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.3.0/ambari-2.7.3.0-centos7.tar.gz</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr></tbody></table><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 130px;"/><col style="width: 130px;"/><col style="width: 130px;"/><col style="width: 869px;"/></colgroup><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">OS</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">Version Number</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">Repository Name</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">Format</span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.5;">URL</span></div></td></tr><tr style="box-sizing: border-box;"><td rowspan="8" style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">RedHat 7
</span></div><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">CentOS 7
</span></div><div style="box-sizing: border-box; padding: 0px; margin-top: 1em; margin-bottom: 1em; background-color: rgb(255, 255, 255); font-size: 16px;"><span style="box-sizing: border-box; font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;-en-paragraph:true;">Oracle Linux 7
</span></div></td><td rowspan="8" style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">HDP-3.1.0.0 </span></div></td><td rowspan="4" style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">HDP </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Version Definition File (VDF) </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-78.xml" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-78.xml</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Base URL </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Repo File </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/hdp.repo" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/hdp.repo</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Tarball </span><a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-centos7-rpm.tar.gz.md5" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">md5</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> |</span><a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-centos7-rpm.tar.gz.asc" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">asc</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"
/></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-centos7-rpm.tar.gz" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.0.0/HDP-3.1.0.0-centos7-rpm.tar.gz</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td rowspan="2" style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">HDP-UTILS </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Base URL </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Tarball </span><a href="http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz.md5" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">md5</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> |</span><a href="http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz.asc" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">asc</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"
/></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td rowspan="2" style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">HDP-GPL </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 130px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">URL </span></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/hdp.gpl.repo" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/hdp.gpl.repo</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr><tr style="box-sizing: border-box;"><td style="box-sizing: border-box; vertical-align: top; border: 1px solid; width: 130px; padding: 8px;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">Tarball </span><a href="http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/HDP-GPL-3.1.0.0-centos7-gpl.tar.gz.md5" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">md5</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"> |</span><a href="http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/HDP-GPL-3.1.0.0-centos7-gpl.tar.gz.asc" style="box-sizing: border-box; font-size: 16px; color: rgb(31, 164, 212); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">asc</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;"
/></div></td><td style="box-sizing: border-box; vertical-align: top; width: 869px; padding: 8px; border: 1px solid;"><div style="background-color: rgb(255, 255, 255); font-size: 16px;"><a href="http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/HDP-GPL-3.1.0.0-centos7-gpl.tar.gz" style="font-size: 16px; font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0/HDP-GPL-3.1.0.0-centos7-gpl.tar.gz</a><span style="font-size: 16px; color: rgb(68, 68, 68); font-family: Roboto, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;" /></div></td></tr></tbody></table><div>解压：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>tar -zxvf ambari-2.7.3.0-centos7.tar.gz </div><div>tar -zxvf HDP-3.1.0.0-centos7-rpm.tar.gz</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">mv HDP hdp</span></div><div>tar -zxvf HDP-UTILS-1.1.0.22-centos7.tar.gz -C hdp</div></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># 临时内网解决方案</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">    nohup python -m SimpleHTTPServer 8900 &amp;</span></div><div><br/></div><div>配置：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>/etc/yum.repos.d/ambari.repo</div><div><div><br/></div></div><div>[Updates-Ambari-2.7.3.0]</div><div>name=Ambari-2.7.3.0-Updates</div><div>baseurl=http://192.168.20.65:8900/ambari/centos7/2.7.3.0-139</div><div>gpgcheck=0</div><div>enabled=1</div><div>priority=1</div><div><div><br/></div><div><br/></div><div>/etc/yum.repos.d/hdp.repo</div><div><br/></div><div>#VERSION_NUMBER=3.1.0.0-78</div><div>[HDP-3.1.0.0]</div><div>name=HDP Version - HDP-3.1.0.0</div><div>baseurl=http://192.168.20.65:8900/hdp/centos7/3.1.0.0-78</div><div>gpgcheck=0</div><div>enabled=1</div><div>priority=1</div><div><div><br/></div></div><div>[HDP-UTILS-1.1.0.22]</div><div>name=HDP-UTILS Version - HDP-UTILS-1.1.0.22</div><div>baseurl=http://192.168.20.65:8900/hdp/HDP-UTILS/centos7/1.1.0.22</div><div>gpgcheck=0</div><div>enabled=1</div><div>priority=1</div><div><div><br/></div></div></div><div># /etc/yum.repos.d/hdp.gpl.repo 不做修改</div><div># baseurl=http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.0.0</div><div><br/></div><div># 验证yum源可用性</div><div>yum clean all</div><div>yum list update</div><div>yum makecache</div><div>yum repolist</div></div><div><br/></div><div>安装Ambari：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>sudo yum install ambari-server -y</div></div><div><br/></div><div>设置Ambari：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div># 1. 配置MySQL(如上)</div><div><br/></div><div># 2. 配置数据库Setup</div><div>sudo ambari-server setup --jdbc-db=mysql --jdbc-driver=/usr/share/java/mysql-connector-java.jar</div><div># If you are updating existing jdbc driver jar for mysql with mysql-connector-java.jar. Please remove the old driver jar, from all hosts. Restarting services that need the driver, will automatically copy the new jar to the hosts.</div><div><br/></div><div># 3. 配置全部setup</div><div>[centos@apollo01 ~]$ <font style="color: rgb(255, 38, 0);">sudo ambari-server setup</font></div><div>Using python  /usr/bin/python</div><div>Setup ambari-server</div><div>Checking SELinux...</div><div>SELinux status is 'disabled'</div><div>Customize user account for ambari-server daemon [y/n] (n)? <font color="#0433ff">y</font></div><div>Enter user account for ambari-server daemon (root):centos</div><div>Adjusting ambari-server permissions and ownership...</div><div>Checking firewall status...</div><div>Checking JDK...</div><div>[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8</div><div>[2] Custom JDK</div><div>==============================================================================</div><div>Enter choice (1): <font color="#0433ff">2</font></div><div>WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.</div><div>WARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.</div><div>Path to JAVA_HOME: <font style="color: rgb(255, 38, 0);">/usr/java/jdk1.8.0_181-cloudera</font></div><div>Validating JDK on Ambari Server...done.</div><div>Check JDK version for Ambari Server...</div><div>JDK version found: 8</div><div>Minimum JDK version is 8 for Ambari. Skipping to setup different JDK for Ambari Server.</div><div>Checking GPL software agreement...</div><div>GPL License for LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html</div><div>Enable Ambari Server to download and install GPL Licensed LZO packages [y/n] (n)? <font color="#0433ff">y</font></div><div>Completing setup...</div><div>Configuring database...</div><div>Enter advanced database configuration [y/n] (n)? <font color="#0433ff">y</font></div><div>Configuring database...</div><div>==============================================================================</div><div>Choose one of the following options:</div><div>[1] - PostgreSQL (Embedded)</div><div>[2] - Oracle</div><div>[3] - MySQL / MariaDB</div><div>[4] - PostgreSQL</div><div>[5] - Microsoft SQL Server (Tech Preview)</div><div>[6] - SQL Anywhere</div><div>[7] - BDB</div><div>==============================================================================</div><div>Enter choice (1): <font color="#0433ff">3</font></div><div>Hostname (localhost): <font style="color: rgb(255, 38, 0);">192.168.16.212</font></div><div>Port (3306): <font style="color: rgb(255, 38, 0);">3306</font></div><div>Database name (ambari): <font style="color: rgb(255, 38, 0);">ambari</font></div><div>Username (ambari): <font style="color: rgb(255, 38, 0);">ambari</font></div><div>Enter Database Password (bigdata): </div><div>Re-enter password: </div><div>Configuring ambari database...</div><div>Should ambari use existing default jdbc /usr/share/java/mysql-connector-java.jar [y/n] (y)? <font color="#0433ff">y</font></div><div>Configuring remote database connection properties...</div><div>WARNING: Before starting Ambari Server, you must run the following DDL directly from the database shell to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql</div><div>Proceed with configuring remote database connection properties [y/n] (y)? <font color="#0433ff">y</font></div><div>Extracting system views...</div><div>ambari-admin-2.7.3.0.139.jar</div><div>....</div><div>Ambari repo file doesn't contain latest json url, skipping repoinfos modification</div><div>Adjusting ambari-server permissions and ownership...</div><div>Ambari Server 'setup' completed successfully.</div></div><div><br/></div><div>非Root运行：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.1.0/securing-credentials/content/ambari_sec_configuring_ambari_for_non_root.html</div></div><div><br/></div><div>运行：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>ambari-server start</div><div>ambari-server status</div><div>ambari-server stop</div><div><br/></div><div>chkconfig --add ambari-server</div><div>chkconfig --add ambari-agent</div></div><div><br/></div><div>访问：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>http://192.168.20.65:8080</div><div>admin admin</div></div><div><br/></div><div>安装HDP集群：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">按照向导运行</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">1. 选择版本 选择本地库</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">2. 安装选项 添加服务器 添加ssh密钥 选择有sudo权限的user </span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">    2.1 服务器域名需换行添加</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">    2.2 </span>为master上ssh的私钥（~/.ssh/id_rsa）</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">3. 自动安装ambari-agent 如遇失败，请参考错误日志调整</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">4. 选择需要安装的HDP组件</span></div></div><div><br/></div><div>TODO：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>JCE ： https://cloud.tencent.com/developer/article/1380567</div><div>LZO ： https://docs.hortonworks.com/HDPDocuments/Ambari-2.7.3.0/administering-ambari/content/amb_configuring_lzo_compression.html</div><div>Non-Root ： https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.1.0/securing-credentials/content/ambari_sec_how_to_configure_an_ambari_agent_for_non_root.html</div></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/29990C57-A80D-431B-9317-FEEED7409048.png" height="416" width="2090"/><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/0F9605B0-5C12-4ECC-8F98-D92D24D6BACA.png" height="1270" width="2578"/><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/95B7BFE7-79BC-4DA9-B19D-D18C4156BAC9.png" height="1292" width="2134"/><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/A4E15A30-0211-4857-B3C3-F132486266FA.png" height="803" width="499"/><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/B63EBA92-52F3-408C-8502-75EB6356C93F.png" height="604" width="1472"/><br/></div><div><br/></div><div>HDFS ssl: admin admin</div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/47D1B806-0DC6-426B-B223-F4B3B0462C35.png" height="826" width="1858"/><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/05ED9F87-3992-4766-87DF-DFFB0B618E9E.png" height="842" width="986"/><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>添加NameNode HA</div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/3D849ABB-2951-4577-81FD-77B8D102E43D.png" height="822" width="1872"/><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/D2657C77-D0EB-4CFB-A0B2-4A4BA8F6D642.png" height="593" width="1866"/><br/></div><div>安装完成后</div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/46F38883-EE81-449B-9347-F468DB6C188E.png" height="189" width="842"/><br/></div><div><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/ACE12C43-07EC-4F84-A384-1398426B3871.png" height="372" width="573"/><br/></div><div><br/></div><div><img src="HDP%E5%AE%89%E8%A3%85.resources/C044020C-68E4-43AE-8A8C-29F99E7E5E3D.png" height="428" width="444"/><br/></div><div><br/></div><div><br/></div><div>SQL1：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>show grants;</div><div><div><br/></div><div><br/></div></div><div>CREATE USER 'ambari'@'%' IDENTIFIED BY '12345_Zjz'; </div><div>GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%'; </div><div>CREATE USER 'ambari'@'localhost' IDENTIFIED BY '12345_Zjz'; </div><div>GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'localhost'; </div><div>CREATE USER 'ambari'@'192.168.20.65' IDENTIFIED BY '12345_Zjz'; </div><div>GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'192.168.20.65'; </div><div>FLUSH PRIVILEGES;</div><div><div><br/></div><div><br/></div></div><div>CREATE USER 'rangerdba'@'localhost' IDENTIFIED BY 'rangerdba';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'localhost';</div><div>CREATE USER 'rangerdba'@'%' IDENTIFIED BY 'rangerdba';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'%';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'localhost' WITH GRANT OPTION;</div><div>GRANT ALL PRIVILEGES ON *.* TO 'rangerdba'@'%' WITH GRANT OPTION;</div><div>FLUSH PRIVILEGES;</div><div><div><br/></div><div><br/></div></div><div>select user from user; </div><div>drop user 'registry'@'%';</div><div>drop user 'streamline'@'%';</div><div>drop user 'druid'@'%';</div><div>drop user 'superset'@'%';</div><div>FLUSH PRIVILEGES;</div><div><div><br/></div><div><br/></div></div><div>create database registry DEFAULT CHARACTER SET utf8;</div><div>create database streamline DEFAULT CHARACTER SET utf8;</div><div>CREATE USER 'registry'@'%' IDENTIFIED BY '123456';</div><div>CREATE USER 'streamline'@'%' IDENTIFIED BY '123456';</div><div>GRANT ALL PRIVILEGES ON registry.* TO 'registry'@'%' WITH GRANT OPTION;</div><div>GRANT ALL PRIVILEGES ON streamline.* TO 'streamline'@'%' WITH GRANT OPTION ;</div><div>commit;</div><div><div><br/></div><div><br/></div></div><div>CREATE DATABASE druid DEFAULT CHARACTER SET utf8;</div><div>CREATE DATABASE superset DEFAULT CHARACTER SET utf8;</div><div>CREATE USER 'druid'@'%' IDENTIFIED BY '123456';</div><div>CREATE USER 'superset'@'%' IDENTIFIED BY '123456';</div><div>GRANT ALL PRIVILEGES ON *.* TO 'druid'@'%' WITH GRANT OPTION;</div><div>GRANT ALL PRIVILEGES ON *.* TO 'superset'@'%' WITH GRANT OPTION;</div><div>commit;</div><div><div><br/></div><div><br/></div></div><div>create database hive character set utf8;</div><div>create database oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</div><div><div><br/></div><div><br/></div></div><div># 临时设置为1</div><div>show variables like 'log_bin_trust_function_creators';</div><div>set global log_bin_trust_function_creators=1;</div><div><div><br/></div><div><br/></div></div><div>drop database oozie;</div><div>drop database registry;</div><div>drop database streamline;</div><div>drop database druid;</div><div>drop database superset;</div><div>drop database hive;</div><div>drop database ambari;</div><div>drop database ranger;</div><div>drop database rangerkms;</div><div>drop database streamline;</div><div>drop database superset;</div></div><div><br/></div><div>SQL2</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>CREATE DATABASE ambari DEFAULT CHARACTER SET utf8; </div><div>USE ambari;</div><div><div><br/></div><div><br/></div></div><div>CREATE TABLE `groups` (</div><div>  group_id INTEGER,</div><div>  principal_id BIGINT NOT NULL,</div><div>  group_name VARCHAR(255) NOT NULL,</div><div>  ldap_group INTEGER NOT NULL DEFAULT 0,</div><div>  group_type VARCHAR(255) NOT NULL DEFAULT 'LOCAL',</div><div>  CONSTRAINT PK_groups PRIMARY KEY (group_id),</div><div>  CONSTRAINT FK_groups_principal_id FOREIGN KEY (principal_id) REFERENCES adminprincipal(principal_id),</div><div>  CONSTRAINT UNQ_groups_0 UNIQUE (group_name, ldap_group));</div><div>    </div><div>CREATE TABLE members (</div><div>  member_id INTEGER,</div><div>  group_id INTEGER NOT NULL,</div><div>  user_id INTEGER NOT NULL,</div><div>  CONSTRAINT PK_members PRIMARY KEY (member_id),</div><div>  CONSTRAINT FK_members_group_id FOREIGN KEY (group_id) REFERENCES `groups` (group_id),</div><div>  CONSTRAINT FK_members_user_id FOREIGN KEY (user_id) REFERENCES users (user_id),</div><div>  CONSTRAINT UNQ_members_0 UNIQUE (group_id, user_id));    </div></div><div><br/></div></body></html>